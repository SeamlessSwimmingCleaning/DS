<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=320, user-scalable=no">
    <style>
        :root {
            --bg-top: #fdfcf0; 
            --bg-bottom: #e8f4f8; 
            --border: #7d6e83; 
            --accent: #ffdfba; 
            --text: #4a4a4a;
        }

        body, html {
            margin: 0; padding: 0;
            background: #222;
            font-family: 'Courier New', monospace;
            image-rendering: pixelated;
        }

        /* Top Screen (400px wide, but we use 320 for 3DS compatibility) */
        .screen-top {
            width: 320px;
            height: 212px; /* Adjusted for 3DS browser UI bars */
            background: var(--bg-top);
            border: 4px solid var(--border);
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        /* Bottom Screen */
        .screen-bottom {
            width: 320px;
            height: 240px;
            background: var(--bg-bottom);
            border: 4px solid var(--border);
            margin: 0 auto;
        }

        .window {
            padding: 10px;
            display: none;
        }

        .active { display: block; }

        /* Pixel Buttons */
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            padding: 5px;
        }

        .btn {
            background: var(--accent);
            border: 2px solid var(--border);
            height: 45px;
            line-height: 45px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
        }

        canvas {
            background: #000;
            display: block;
            margin: 0 auto;
        }

        textarea {
            width: 90%;
            height: 100px;
            border: 2px solid var(--border);
            font-family: inherit;
        }
    </style>
</head>
<body>

<div class="screen-top">
    <div id="win-txt" class="window active">
        <div style="font-size: 10px; background: var(--border); color: white; padding: 2px;">NOTEPAD</div>
        <p id="output" style="font-size: 14px;">Tap 'TYPE' below...</p>
    </div>

    <div id="win-snake" class="window">
        <canvas id="s" width="160" height="100"></canvas>
        <div id="score" style="font-size: 10px; text-align: center;">Score: 0</div>
    </div>

    <div id="win-click" class="window" style="text-align:center;">
        <h1 id="c-count">0</h1>
        <div style="width:40px; height:40px; background:pink; margin: 0 auto; border:2px solid var(--border);"></div>
    </div>
</div>

<div class="screen-bottom">
    <div class="grid">
        <div class="btn" onclick="show('win-txt')">TEXT</div>
        <div class="btn" onclick="show('win-snake')">SNAKE</div>
        <div class="btn" onclick="show('win-click')">CLICK</div>
    </div>

    <div id="controls" style="padding: 5px;">
        <div style="text-align:center;">
            <button class="btn" style="width:60px;" onclick="move(0,-1)">UP</button><br>
            <button class="btn" style="width:60px;" onclick="move(-1,0)">L</button>
            <button class="btn" style="width:60px;" onclick="action()">OK</button>
            <button class="btn" style="width:60px;" onclick="move(1,0)">R</button><br>
            <button class="btn" style="width:60px;" onclick="move(0,1)">DN</button>
        </div>
        
        <input type="text" id="kb" placeholder="Type here..." style="width:90%; margin-top:5px;" oninput="sync()">
    </div>
</div>

<script>
    let mode = 'txt';
    let cookies = 0;

    function show(id) {
        document.querySelectorAll('.window').forEach(w => w.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(id === 'win-snake') startSnake();
        mode = id;
    }

    function sync() {
        document.getElementById('output').innerText = document.getElementById('kb').value;
    }

    function action() {
        if(mode === 'win-click') {
            cookies++;
            document.getElementById('c-count').innerText = cookies;
        }
    }

    // SNAKE MINI
    let canvas = document.getElementById("s"), ctx = canvas.getContext("2d");
    let snk = [{x:8,y:5}], fd = {x:5,y:5}, vx=1, vy=0;
    
    function move(x,y) { vx=x; vy=y; }

    function startSnake() {
        setInterval(() => {
            let h = {x: snk[0].x + vx, y: snk[0].y + vy};
            snk.unshift(h);
            if(h.x==fd.x && h.y==fd.y) {
                fd = {x: Math.floor(Math.random()*20), y: Math.floor(Math.random()*12)};
                document.getElementById('score').innerText = "Score: " + snk.length;
            } else { snk.pop(); }
            
            ctx.fillStyle="black"; ctx.fillRect(0,0,160,100);
            ctx.fillStyle="lime"; snk.forEach(p=>ctx.fillRect(p.x*8,p.y*8,7,7));
            ctx.fillStyle="red"; ctx.fillRect(fd.x*8,fd.y*8,7,7);
        }, 200);
    }
</script>

</body>
</html>
