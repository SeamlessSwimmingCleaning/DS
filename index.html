<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        /* --- THE LOCKDOWN CSS --- */
        html, body {
            margin: 0; padding: 0;
            width: 320px;
            height: 452px; /* 212 + 240 */
            overflow: hidden !important; /* Forces scrollbars away */
            position: fixed; /* Glues the page to the top-left corner */
            background: #000;
            touch-action: none; /* Modern browser lock */
            -ms-touch-action: none; /* IE/3DS lock */
        }

        /* PDA COLORS */
        :root { --bg: #d4d4d4; --ink: #1a1a1a; --border: 2px solid #1a1a1a; }

        #pda-shell {
            width: 320px;
            height: 452px;
            background: var(--bg);
            position: absolute;
            top: 0; left: 0;
        }

        .display {
            width: 320px; height: 212px;
            background: var(--bg);
            border-bottom: 4px double var(--ink);
            box-sizing: border-box; padding: 5px;
        }

        .digitizer {
            width: 320px; height: 240px;
            background: var(--bg);
            box-sizing: border-box; padding: 5px;
        }

        /* APPS */
        .win { display: none; height: 160px; border: 1px solid var(--ink); background: #eee; padding: 5px; font-size: 10px; }
        .active { display: block; }
        .taskbar { display: table; width: 100%; border-spacing: 2px; }
        .app-btn {
            display: table-cell; background: var(--bg); border: var(--border);
            font-size: 8px; text-align: center; height: 25px; vertical-align: middle; font-weight: bold;
        }
        .pad-btn { display: inline-block; width: 40px; height: 30px; background: var(--bg); border: var(--border); font-size: 10px; }
        
        #memo-list { padding: 0; list-style: none; margin: 0; }
        .memo-item { border-bottom: 1px solid var(--ink); margin-bottom: 2px; }

    </style>
</head>
<body>

<div id="pda-shell">
    <div class="display">
        <div style="font-size: 8px; border-bottom: 1px solid #000;">PDA_v1.0_LOCKED</div>
        
        <div id="w_memo" class="win active">
            <b>MEMO_LOG:</b>
            <ul id="memo-list"><li>- SYSTEM_OK</li></ul>
        </div>

        <div id="w1" class="win"><div id="out">READY...</div></div>
        <div id="w2" class="win"><canvas id="snk" width="160" height="100"></canvas></div>
        <div id="w4" class="win"><canvas id="draw" width="280" height="140"></canvas></div>
    </div>

    <div class="digitizer">
        <div class="taskbar">
            <div class="app-btn" onclick="nav('w_memo')">MEMO</div>
            <div class="app-btn" onclick="nav('w1')">TERM</div>
            <div class="app-btn" onclick="nav('w2')">GAME</div>
            <div class="app-btn" onclick="nav('w4')">SKTCH</div>
        </div>

        <div style="text-align:center; margin-top: 10px;">
            <button class="pad-btn" onclick="mv(0,-1)">UP</button><br>
            <button class="pad-btn" onclick="mv(-1,0)">L</button>
            <button class="pad-btn" style="width:60px;" onclick="saveMemo()">SAVE</button>
            <button class="pad-btn" onclick="mv(1,0)">R</button><br>
            <button class="pad-btn" onclick="mv(0,1)">DN</button>
        </div>

        <input type="text" id="kb" placeholder="WRITE..." style="width:90%; margin:10px 5%; border:1px solid #000; background:transparent;">
    </div>
</div>

<script>
    /* --- THE ANTI-SCROLL SCRIPT --- */
    
    // 1. Force Scroll Reset
    function forceReset() {
        if (window.scrollY !== 0 || window.scrollX !== 0) {
            window.scrollTo(0, 0);
        }
    }
    // Check every 100ms to see if the page moved
    setInterval(forceReset, 100);

    // 2. Kill Touch Dragging
    document.addEventListener('touchmove', function(e) {
        // Allow drawing on the sketch pad, block everything else
        if (e.target.id !== 'draw') {
            e.preventDefault();
        }
    }, { passive: false });

    // 3. Prevent Focus Zoom
    var input = document.getElementById('kb');
    input.addEventListener('focus', function() {
        // 3DS zooms when you click an input; this tries to fight it
        window.scrollTo(0, 0);
    });

    /* --- PDA LOGIC --- */
    var cur = 'w_memo';
    function nav(id) {
        document.getElementById(cur).classList.remove('active');
        document.getElementById(id).classList.add('active');
        cur = id;
    }

    function saveMemo() {
        var val = document.getElementById('kb').value;
        if(val) {
            var li = document.createElement('li');
            li.className = 'memo-item';
            li.innerHTML = "> " + val;
            document.getElementById('memo-list').appendChild(li);
            document.getElementById('kb').value = "";
            nav('w_memo');
        }
    }
</script>
</body>
</html>
