<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        /* --- KEEPING YOUR E-INK PDA PALETTE --- */
        :root {
            --bg: #d4d4d4; 
            --ink: #1a1a1a;
            --border: 2px solid #1a1a1a;
        }

        /* THE LOCK: Preventing the jumpy screen */
        html, body {
            margin: 0; padding: 0;
            width: 320px;
            height: 452px; /* Top + Bottom screen combined */
            overflow: hidden;
            background: #000;
            font-family: "Courier New", monospace;
            touch-action: none;
        }

        /* THE SHELL: Forces both panels into view */
        #pda-shell {
            position: absolute;
            top: 0; left: 0;
            width: 320px;
            display: block;
        }

        .display {
            width: 320px;
            height: 212px;
            background: var(--bg);
            border-bottom: 4px double var(--ink);
            box-sizing: border-box;
            padding: 5px;
        }

        .digitizer {
            width: 320px;
            height: 240px;
            background: var(--bg);
            box-sizing: border-box;
            padding: 5px;
        }

        /* WINDOWS & BUTTONS */
        .win { display: none; height: 160px; border: 1px solid var(--ink); background: #eee; padding: 5px; overflow-y: auto; }
        .active { display: block; }

        .taskbar { display: table; width: 100%; border-spacing: 2px; }
        .app-btn {
            display: table-cell; background: var(--bg); border: var(--border);
            font-size: 8px; text-align: center; height: 25px; vertical-align: middle;
            font-weight: bold;
        }

        .pad-btn {
            display: inline-block; width: 40px; height: 30px; 
            background: var(--bg); border: var(--border); font-size: 10px;
        }

        /* NOTES APP SPECIFIC */
        #memo-list { font-size: 10px; list-style: none; padding: 0; }
        .memo-item { border-bottom: 1px dashed var(--ink); padding: 2px; }

    </style>
</head>
<body scroll="no">

<div id="pda-shell">
    <div class="display">
        <div style="font-size: 9px; font-weight: bold; margin-bottom: 2px;">PDA SYSTEM v1.0</div>
        
        <div id="w_memo" class="win active">
            <div style="background: var(--ink); color: var(--bg); font-size: 9px; padding: 2px;">SAVED_MEMOS</div>
            <ul id="memo-list">
                <li class="memo-item">- Welcome to PDA</li>
            </ul>
        </div>

        <div id="w1" class="win">
            <div id="out">TERMINAL: Ready...</div>
        </div>

        <div id="w2" class="win"><canvas id="snk" width="160" height="100"></canvas></div>
        <div id="w3" class="win" style="text-align:center;"><h1 id="clicks">0</h1></div>
        <div id="w4" class="win"><canvas id="draw" width="280" height="140"></canvas></div>
    </div>

    <div class="digitizer">
        <div class="taskbar">
            <div class="app-btn" onclick="nav('w_memo')">MEMO</div>
            <div class="app-btn" onclick="nav('w1')">TERM</div>
            <div class="app-btn" onclick="nav('w2')">GAME</div>
            <div class="app-btn" onclick="nav('w4')">SKTCH</div>
        </div>

        <div style="text-align:center; margin-top: 10px;">
            <button class="pad-btn" onclick="mv(0,-1)">UP</button><br>
            <button class="pad-btn" onclick="mv(-1,0)">L</button>
            <button class="pad-btn" style="width:60px;" onclick="saveMemo()">SAVE</button>
            <button class="pad-btn" onclick="mv(1,0)">R</button><br>
            <button class="pad-btn" onclick="mv(0,1)">DN</button>
        </div>

        <input type="text" id="kb" placeholder="WRITE MEMO..." style="width:90%; margin:10px 5%; border:1px solid #000;">
    </div>
</div>

<script>
    /* --- ADDING THE SCREEN ALIGNMENT ADDITION --- */
    // This forces the 3DS browser to stay at the very top so both screens align
    function lockView() {
        window.scrollTo(0, 0);
    }
    setInterval(lockView, 500); // Re-aligns every half second
    document.addEventListener('touchmove', function(e) { if(e.target.id !== 'draw') e.preventDefault(); }, {passive:false});

    var cur = 'w_memo';

    function nav(id) {
        document.getElementById(cur).classList.remove('active');
        document.getElementById(id).classList.add('active');
        cur = id;
    }

    /* --- ADDING NOTES APP LOGIC --- */
    function saveMemo() {
        var text = document.getElementById('kb').value;
        if(text.trim() !== "") {
            var li = document.createElement('li');
            li.className = 'memo-item';
            li.innerHTML = "> " + text;
            document.getElementById('memo-list').appendChild(li);
            document.getElementById('kb').value = ""; // Clear input
            nav('w_memo'); // Switch to memo view to see it
        }
    }

    // SNAKE & DRAW (Keeping your logic)
    function mv(x,y) { vx=x; vy=y; }
    // ... rest of your snake/draw code would go here ...
</script>
</body>
</html>
